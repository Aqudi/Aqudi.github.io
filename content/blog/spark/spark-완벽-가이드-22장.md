---
title: Spark 완벽 가이드 22장
date: 2020-12-19 17:12:38
category: spark
thumbnail: { thumbnailSrc }
draft: false
---

이 장에서는 구조적 스트리밍의 핵심 개념과 기초 API에 이어서
이벤트 시간처리와 상태 기반 처리에 대해서 자세히 알아봅니다.

## 처리 시간과 이벤트 시간

- 처리 시간 : 이벤트가 시스템에 도착한 시간
- 이벤트 시간 : 이벤트가 발생한 시간

## 이벤트 시간 기준 처리의 특징

- 이벤트가 발생한 시간을 기준으로 처리를 하기 때문에 늦게 도착한 이벤트도 처리할 수 있다.
- 이벤트 시간 기준 처리를 하기 위해서는 관련된 상태들을 유지하고 있어야 한다.

## 상태 기반 처리

### 필요한 상황

- 오랜 시간에 걸쳐 중간 처리 정보(상태)를 사용하거나 갱신하는 경우
- 이벤트 시간을 사용하거나 키에 대한 집계를 사용하는 경우 (즉, 이전 상태가 필요한 경우)

### 스파크에서 제공해주는 것

- 인메모리 상태 저장소
- 중간 상태를 체크포인트 디렉터리에 백업

### 임의적인 상태 기반 처리

- 상태의 유형, 갱신 방법, 제거 시점을 임의로 생성할 수 있다.
